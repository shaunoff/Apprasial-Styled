{"version":3,"sources":["../src/Controller.js"],"names":["Controller","animationSource","options","target","onNeedReattachAllAninmations","remove","_animationSource","_target","_options","_onNeedReattachAllAninmations","_remove","_commandsWaitingForAttach","_gsapAnimation","kill","undefined","time","paused","reversed","invalidate","restart","pause","reverse","play","Error","splice","forEach","fnName","args","EXPOSED_METHODS","ONLY_GETTER_METHODS","bindAPI","filter","item","pos","arr","indexOf","prototype","result","onlyGetter","push","length","console","warn"],"mappings":"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","file":"Controller.js","sourcesContent":["export default class Controller {\n  constructor(\n    animationSource,\n    options,\n    target,\n    onNeedReattachAllAninmations,\n    remove\n  ) {\n    this._animationSource = animationSource\n    this._target = target\n    this._options = options\n    this._onNeedReattachAllAninmations = onNeedReattachAllAninmations\n    this._remove = remove\n    this._commandsWaitingForAttach = []\n  }\n\n  //Not documented. For internal usage. (animachine)\n  replaceAnimationSource(animationSource) {\n    if (this._gsapAnimation) {\n      this._gsapAnimation.kill()\n      this._gsapAnimation = undefined\n      this._animationSource = animationSource\n      this._onNeedReattachAllAninmations()\n    }\n    else {//it's not attached yet\n      this._animationSource = animationSource\n    }\n  }\n\n  attach() {\n    if (this._gsapAnimation) {\n      let time = this._gsapAnimation.time()\n      let paused = this._gsapAnimation.paused()\n      let reversed = this._gsapAnimation.reversed()\n      this._gsapAnimation\n        .invalidate()\n        .restart(false, true) //suppress events\n        .time(time, true) //suppress events - http://greensock.com/docs/#/HTML5/GSAP/TimelineMax/time/\n      if (paused) {\n        this._gsapAnimation.pause(null, true)//suppress events\n      }\n      if (reversed) {\n        this._gsapAnimation.reverse(null, true)//suppress events\n      }\n    }\n    else {\n      this._gsapAnimation = this._animationSource({\n        target: this._target,\n        options: this._options,\n      })\n\n      if (__DEV__) {\n        if (\n          !this._gsapAnimation ||\n          typeof this._gsapAnimation.play !== 'function'\n        ) {\n          throw Error(`[react-gsap-enhancer] The return value of the animation `\n            + `source doesn't seems to be a GSAP Animation`\n            + `\\nCheck out this animation source: \\n${this._animationSource}`\n            + `\\nbecause it returned this value: ${this._gsapAnimation}`\n            + `\\n\\n`\n            + `If you're using something like TweenMax.staggerTo() witch returns`\n            + ` an array of GSAP Animations please use Timeline (like`\n            + ` TimelineMax.staggerTo()) instead. It has the same effect`\n            + ` but returns one object.`)\n        }\n      }\n    }\n\n    this._commandsWaitingForAttach\n      .splice(0)\n      .forEach(({fnName, args}) => this[fnName](...args))\n  }\n\n  kill() {\n    if (this._gsapAnimation) {\n      this._gsapAnimation.kill()\n    }\n    this._remove(this)\n  }\n}\n\n\n\nconst EXPOSED_METHODS = [\n  'currentLabel', 'delay', 'duration', 'endTime', 'eventCallback', 'from',\n  'fromTo', 'getLabelAfter', 'getLabelArray', 'getLabelBefore', 'getLabelTime',\n  'invalidate', 'isActive', 'pause', 'paused', 'play', 'progress', 'restart',\n  'resume', 'reverse', 'reversed', 'seek', 'startTime', 'time', 'timeScale',\n  'totalDuration', 'totalProgress', 'totalTime', 'tweenFromTo', 'tweenTo'\n]\n\nconst ONLY_GETTER_METHODS = [\n  'delay',\n  'duration',\n  'startTime',\n  'totalDuration',\n  'totalProgress',\n  'totalTime',\n  'endTime'\n]\n\nfunction bindAPI() {\n  EXPOSED_METHODS\n    //remove duplications\n    .filter((item, pos, arr) => arr.indexOf(item) === pos)\n    .forEach(fnName => {\n      Controller.prototype[fnName] = function (...args) {\n        let result\n        const onlyGetter = ONLY_GETTER_METHODS.indexOf(fnName) !== -1\n\n        if (!this._gsapAnimation) {\n          //if the animation doesn't attached yet, schedule the API call\n          this._commandsWaitingForAttach.push({fnName, args})\n        }\n        else if (typeof this._gsapAnimation[fnName] === 'function') {\n          if (__DEV__) {\n            if (onlyGetter && args.length !== 0) {\n              console.warn(\n                `[react-gsap-enhancer] controller.${fnName} is only a getter `\n                + `but it looks like you tried to use as a getter by calling `\n                + `it with the following arguments: \"${args}\"`\n              )\n            }\n          }\n\n          result = onlyGetter\n            ? this._gsapAnimation[fnName]()\n            : this._gsapAnimation[fnName](...args)\n        }\n        else {\n          throw Error(\n            `[react-gsap-enhancer] Animation source has no method: '${fnName}.'`\n            + `\\nYou maybe tryed to use an only TweenMax method on TweenLite instance`\n            + `\\nCheck GSAP docs for more detailes: http://greensock.com/docs/#/HTML5/GSAP/`\n          )\n        }\n        return result === this._gsapAnimation ? this : result\n      }\n    })\n}\nbindAPI()\n"]}